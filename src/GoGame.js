// Generated by CoffeeScript 1.8.0
var Board, Cell, Cluster, GoGame;

GoGame = (function() {
  function GoGame(size) {
    if (size == null) {
      size = 9;
    }
    this.board = new Board(size);
    this.turn = Cell.PIECE.BLACK;
  }

  GoGame.prototype.pass = function() {
    return this._alternateTurn();
  };

  GoGame.prototype.play = function(x, y) {
    var cell;
    cell = this.board.at(x, y).play(this.turn);
    this._alternateTurn();
    return cell;
  };

  GoGame.prototype._alternateTurn = function() {
    return this.turn = !this.turn;
  };

  return GoGame;

})();

Board = (function() {
  function Board(size) {
    var cell, left, up, x, y, _i, _j, _ref, _ref1;
    this.size = size;
    this.cells = [];
    this.clusters = [];
    for (x = _i = 0, _ref = this.size; 0 <= _ref ? _i < _ref : _i > _ref; x = 0 <= _ref ? ++_i : --_i) {
      this.cells.push([]);
      for (y = _j = 0, _ref1 = this.size; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; y = 0 <= _ref1 ? ++_j : --_j) {
        cell = new Cell();
        this.cells[x].push(cell);
        if (y > 0) {
          up = this.cells[x][y - 1];
          cell.up = up;
          up.down = cell;
        }
        if (x > 0) {
          left = this.cells[x - 1][y];
          cell.left = left;
          left.right = cell;
        }
      }
    }
  }

  Board.prototype.at = function(x, y) {
    return this.cells[x][y];
  };

  return Board;

})();

Cell = (function() {
  Cell.PIECE = {
    EMPTY: null,
    BLACK: false,
    WHITE: true
  };

  function Cell() {
    this.value = Cell.PIECE.EMPTY;
    this.up = this.down = this.left = this.right = null;
  }

  Cell.prototype.play = function(value) {
    this.value = value;
    return this;
  };

  return Cell;

})();

Cluster = (function() {
  function Cluster(cell) {
    this.cells = [cell];
  }

  Cluster.prototype.add = function(cell) {
    return this.cells.push(cell);
  };

  return Cluster;

})();
